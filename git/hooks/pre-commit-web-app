#!/bin/bash
# Git Pre-Commit Hook: Web Application Branch Protection
# Based on successful flask-lab implementation
# Protects main, deployment, and staging branches

branch="$(git rev-parse --abbrev-ref HEAD)"

# Define protected branches for web applications
protected_branches=("main" "deployment" "staging" "production")

for protected in "${protected_branches[@]}"; do
    if [ "$branch" = "$protected" ]; then
        echo "ðŸš« Direct commits to '$branch' are not allowed."
        echo ""
        echo "Please create a feature branch instead:"
        echo "  git checkout -b feature/your-feature-name"
        echo "  git add ."
        echo "  git commit -m 'your commit message'"
        echo ""
        echo "Web app protected branches: ${protected_branches[*]}"
        echo ""
        echo "Or to bypass this check (emergency only):"
        echo "  git commit --no-verify -m 'your commit message'"
        echo ""
        exit 1
    fi
done

# If we get here, commit is allowed
exit 0
